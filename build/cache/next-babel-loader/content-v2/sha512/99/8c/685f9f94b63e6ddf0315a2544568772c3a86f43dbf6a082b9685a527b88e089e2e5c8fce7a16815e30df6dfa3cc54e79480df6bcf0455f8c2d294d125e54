{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useEffect } from \"react\";\nimport { fetchFood, popularAndNew, allPlates, getCategory } from \"../../../redux/actions/food\";\nimport { Row, Col, Skeleton } from \"antd\";\nimport { shallowEqual, useDispatch, useSelector } from \"react-redux\";\nimport { createSelector } from \"reselect\";\nimport FoodBanner from \"./FoodBanner\";\nimport FoodGrid from \"./FoodGrid\";\nimport FoodSearch from \"./FoodSearch\";\nimport NewOnCheffy from \"./NewOnCheffy\";\nimport PopularNearYou from \"./PopularNearYou\";\nimport MustTryChef from \"./MustTryChef\";\nimport RecommendedChef from \"./RecommendedChef\";\nimport TopKitchens from \"./TopKitchens\";\nimport \"../../../../styles/foodContent.css\";\nimport { FoodGridSkeleton, NewAndPopularSkeleton } from \"../Skeleton\";\nimport Fuse from \"fuse.js\";\n\nconst FoodContent = () => {\n  const dispatch = useDispatch();\n  const {\n    0: popular,\n    1: setPopular\n  } = useState(\"\");\n  const {\n    0: _new,\n    1: setNew\n  } = useState(\"\");\n  const {\n    0: category,\n    1: setCategory\n  } = useState(\"\");\n  const itemCount = useSelector(countSelector, shallowEqual);\n  const {\n    0: keyword,\n    1: setKeyword\n  } = useState(\"\");\n  const {\n    0: results,\n    1: setResults\n  } = useState([]);\n  const {\n    0: searchIn,\n    1: setSearchIn\n  } = useState([]);\n  useEffect(async () => {\n    var allPlates = await dispatch(popularAndNew());\n    const getNewAndPopular = await dispatch(popularAndNew());\n    setPopular(getNewAndPopular.data.popular);\n    setNew(getNewAndPopular.data.new);\n    const resCategory = await dispatch(getCategory());\n    console.log(resCategory.message);\n    setCategory(resCategory.data);\n    setSearchIn(allPlates.data.popular);\n    dispatch(fetchFood());\n  }, []);\n\n  const searchData = pattern => {\n    setKeyword(pattern);\n    setResults([]);\n    const fuse = new Fuse(searchIn, {\n      keys: [\"name\"],\n      options: {\n        threshold: 1,\n        distance: 1000\n      }\n    });\n    const result = fuse.search(pattern);\n    const matches = [];\n\n    if (!result.length) {\n      setResults([]);\n    } else {\n      result.forEach(({\n        item\n      }) => {\n        if (matches.length < 6) {\n          matches.push(item);\n        }\n      });\n      setResults(matches);\n    }\n\n    console.log(searchIn);\n    console.log(matches);\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(FoodBanner, {\n      keyword: keyword,\n      setKeyword: setKeyword,\n      searchData: searchData\n    }), !keyword.length ? /*#__PURE__*/_jsxs(React.Fragment, {\n      children: [category.length ? /*#__PURE__*/_jsx(FoodGrid, {\n        category: category\n      }) : /*#__PURE__*/_jsx(FoodGridSkeleton, {}), /*#__PURE__*/_jsxs(Row, {\n        id: \"newOnCheffy\",\n        children: [_new.length ? /*#__PURE__*/_jsx(NewOnCheffy, {\n          _new: _new\n        }) : /*#__PURE__*/_jsx(NewAndPopularSkeleton, {\n          title: \"New On Cheffy\"\n        }), popular.length ? /*#__PURE__*/_jsx(PopularNearYou, {\n          popular: popular\n        }) : /*#__PURE__*/_jsx(NewAndPopularSkeleton, {\n          title: \"Popular Near You\"\n        })]\n      }), /*#__PURE__*/_jsxs(Row, {\n        children: [/*#__PURE__*/_jsx(RecommendedChef, {}), /*#__PURE__*/_jsx(MustTryChef, {}), /*#__PURE__*/_jsx(TopKitchens, {})]\n      })]\n    }) : /*#__PURE__*/_jsx(FoodSearch, {\n      results: results\n    })]\n  });\n};\n\nconst countSelector = createSelector(state => state.food.collection, items => items.length);\nexport default FoodContent;","map":null,"metadata":{},"sourceType":"module"}