{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Row, Col, Typography, Divider, Collapse, Switch, DatePicker, Select, Button, Input, Radio, Space, Modal } from \"antd\";\nimport React from \"react\";\nimport { ClockCircleOutlined, MinusOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport { AiOutlineMinus, AiOutlinePlus, AiFillCaretDown, AiFillEdit } from \"react-icons/ai\";\nimport { IoIosArrowDown } from \"react-icons/io\";\nimport FoodHeader from \"../Header/HomeHeader\";\nimport FoodFooter from \"../home/FoodFooter\";\nimport Form from \"antd/lib/form/Form\";\nimport App from \"../../../payments/App\";\nimport { useEffect, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { VscLoading } from \"react-icons/vsc\";\nimport { session, useSession } from \"next-auth/client\";\nimport { getUserBasket } from \"../../../redux/actions/cart/cartAction\";\nimport { getUserInfo } from \"../../../redux/actions/user/userAction\";\nimport { getShippingAddressById } from \"../../../redux/actions/shipping-address/shippingAddressAction\";\nimport AppHead from \"../Header/AppHead\";\n\nconst ShippingAddressListModal = ({\n  isModalVisible,\n  showModal,\n  handleOk,\n  handleCancel,\n  deliveryAddressList,\n  shippingAddressId,\n  setShippingAddressId\n}) => {\n  const onChange = e => {\n    setShippingAddressId(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(Modal, {\n      title: \"Shipping Addresses\",\n      visible: isModalVisible,\n      onOk: handleOk,\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsx(Radio.Group, {\n        onChange: onChange,\n        value: shippingAddressId,\n        children: /*#__PURE__*/_jsx(Space, {\n          direction: \"vertical\",\n          children: deliveryAddressList.map((item, index) => {\n            let address = item.addressLine1 + \" \" + item.addressLine2 + \" \" + item.city + \" \" + item.state + \" \" + item.zipCode;\n            return /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsx(Radio, {\n                value: item.id,\n                children: address\n              }), \";\"]\n            });\n          })\n        })\n      })\n    })\n  });\n};\n\nconst Item = ({\n  price,\n  name,\n  orderCount,\n  plateID\n}) => {\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"cart-item flex flex-row justify-between\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"order-last py-4\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex flex-row items-center\",\n          children: /*#__PURE__*/_jsxs(\"span\", {\n            className: \"flex space-x-2\",\n            children: [/*#__PURE__*/_jsxs(\"p\", {\n              className: \"font-bold space-x-1\",\n              children: [\"$\", price]\n            }), \" \", /*#__PURE__*/_jsx(\"p\", {\n              children: \"x\"\n            }), \" \", /*#__PURE__*/_jsx(\"p\", {\n              className: \"font-semibold\",\n              children: orderCount\n            })]\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"p\", {\n        className: \"text-base py-4 font-light\",\n        children: name\n      })]\n    })]\n  });\n};\n\nconst CollapseTitle = ({\n  title,\n  number\n}) => {\n  return /*#__PURE__*/_jsxs(\"span\", {\n    className: \"flex items-center\",\n    children: [/*#__PURE__*/_jsx(\"p\", {\n      className: \"bg-primary pt-1 text-xs text-white text-center align-middle mr-2 px-1 rounded-full w-6 h-6\",\n      children: number\n    }), /*#__PURE__*/_jsx(Text, {\n      strong: true,\n      className: \"text-lg font-extrabold\",\n      children: title\n    })]\n  });\n};\n\nconst CollapseItem = ({\n  deliveryAddress,\n  lonLat,\n  deliveryAddressList,\n  shippingAddressId,\n  setShippingAddressId,\n  getShipAddressById\n}) => {\n  const {\n    0: isModalVisible,\n    1: setIsModalVisible\n  } = useState(false);\n\n  const showModal = () => {\n    setIsModalVisible(true);\n  };\n\n  const handleOk = () => {\n    getShipAddressById(shippingAddressId);\n    setIsModalVisible(false);\n  };\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n  };\n\n  return /*#__PURE__*/_jsxs(Row, {\n    children: [/*#__PURE__*/_jsxs(Col, {\n      style: {\n        backgroundColor: \"#EDF2F7\"\n      },\n      className: \"px-3 justify-between flex items-start mx-1 w-full rounded-md py-4\",\n      children: [/*#__PURE__*/_jsxs(\"span\", {\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: \"text-base pb-1\",\n          children: \"Contactless Delivery\"\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: \"text-xs pt-1\",\n          children: \"Be safe, the rider will place your order at your door\"\n        })]\n      }), /*#__PURE__*/_jsx(Switch, {\n        size: \"small\",\n        className: \"mt-2 ml-2\"\n      })]\n    }), /*#__PURE__*/_jsxs(Col, {\n      className: \"mx-1 py-4 w-full felx flex-col\",\n      children: [/*#__PURE__*/_jsx(Text, {\n        strong: true,\n        children: \"Delivery Time\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"mt-4 rounded-md w-full\",\n        style: {\n          backgroundColor: \"#EDF2F7\"\n        },\n        children: /*#__PURE__*/_jsx(DatePicker, {\n          popupStyle: {\n            textAlign: \"center\"\n          },\n          picker: \"date\",\n          className: \"text-center w-full placeholder-gray-900 bg-red-500 py-4\",\n          suffixIcon: /*#__PURE__*/_jsx(IoIosArrowDown, {\n            className: \"font-bold text-xl text-black\"\n          }),\n          bordered: false,\n          placeholder: \"Delivery time\"\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"mt-7 rounded-md w-full\",\n        style: {\n          backgroundColor: \"#EDF2F7\"\n        },\n        children: /*#__PURE__*/_jsxs(Select, {\n          allowClear: true,\n          optionFilterProp: \"children\",\n          bordered: false,\n          showArrow: true,\n          suffixIcon: /*#__PURE__*/_jsx(IoIosArrowDown, {\n            className: \"text-black text-xl\"\n          }),\n          className: \"w-full py-2 text-sm\",\n          size: \"large\",\n          placeholder: \"Select Delivery type\",\n          children: [/*#__PURE__*/_jsx(Option, {\n            value: \"1\",\n            children: \"ASAP\"\n          }), /*#__PURE__*/_jsx(Option, {\n            value: \"2\",\n            children: \"Today\"\n          }), /*#__PURE__*/_jsx(Option, {\n            value: \"3\",\n            children: \"Tomorrow\"\n          }), /*#__PURE__*/_jsx(Option, {\n            value: \"4\",\n            children: \"Specify other?!\"\n          })]\n        })\n      })]\n    }), /*#__PURE__*/_jsxs(Col, {\n      className: \"pt-3 mx-1 w-full\",\n      children: [/*#__PURE__*/_jsx(Text, {\n        strong: true,\n        children: \"Delivery Address\"\n      }), lonLat ? /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"iframe\", {\n          src: lonLat,\n          width: \"400\",\n          height: \"300\",\n          allowFullScreen: \"\",\n          loading: \"lazy\",\n          className: \"rounded-xl w-full mt-5\"\n        }), /*#__PURE__*/_jsxs(\"span\", {\n          className: \"flex pt-6 items-center justify-between\",\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: \"w-3/6\",\n            children: deliveryAddress\n          }), /*#__PURE__*/_jsxs(Button, {\n            className: \"rounded-lg py-4 px-2 flex items-center\",\n            type: \"ghost\",\n            onClick: showModal,\n            children: [/*#__PURE__*/_jsx(AiFillEdit, {\n              className: \"mr-1\"\n            }), \" Change\"]\n          }), /*#__PURE__*/_jsx(ShippingAddressListModal, {\n            isModalVisible: isModalVisible,\n            handleOk: handleOk,\n            handleCancel: handleCancel,\n            deliveryAddressList: deliveryAddressList,\n            shippingAddressId: shippingAddressId,\n            setShippingAddressId: setShippingAddressId\n          })]\n        })]\n      }) : /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"img\", {\n          src: \"/images/maps.png\",\n          className: \"rounded-xl w-full\"\n        }), /*#__PURE__*/_jsxs(\"span\", {\n          className: \"flex pt-6 items-center justify-between\",\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: \"w-3/6\"\n          }), /*#__PURE__*/_jsxs(Button, {\n            className: \"rounded-lg py-4 px-2 flex items-center\",\n            type: \"ghost\",\n            onClick: showModal,\n            children: [/*#__PURE__*/_jsx(AiOutlinePlus, {\n              className: \"mr-1\"\n            }), \" Add\"]\n          })]\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(Col, {\n      className: \"w-full pt-4 mx-1\",\n      children: /*#__PURE__*/_jsx(Input, {\n        placeholder: \"Apartment #\",\n        bordered: false,\n        className: \"py-4 rounded-md w-full\",\n        style: {\n          backgroundColor: \"#EDF2F7\"\n        }\n      })\n    }), /*#__PURE__*/_jsx(Col, {\n      className: \"w-full pt-4 mx-1\",\n      children: /*#__PURE__*/_jsx(Input.TextArea, {\n        placeholder: \"Note to chef or rider\",\n        bordered: false,\n        className: \"py-5 rounded-md w-full\",\n        style: {\n          backgroundColor: \"#EDF2F7\"\n        }\n      })\n    }), /*#__PURE__*/_jsx(\"p\", {\n      className: \"mx-1 py-3 select-none cursor-pointer bg-primary px-5 text-white font-bold mt-6 rounded-xl\",\n      children: \"Submit\"\n    })]\n  });\n};\n\nconst {\n  Text\n} = Typography;\nconst {\n  Option\n} = Select;\n\nfunction Payments() {\n  const [session, loading] = useSession();\n  const dispatch = useDispatch();\n  const {\n    0: basketData,\n    1: setBasketData\n  } = useState({});\n  const {\n    0: subTotal,\n    1: setSubTotal\n  } = useState(0.0);\n  const {\n    0: total,\n    1: setTotal\n  } = useState(0.0);\n  const {\n    0: deliveryFee,\n    1: setDeliveryFee\n  } = useState(0.0);\n  const {\n    0: shippingAddress,\n    1: setShippingAddress\n  } = useState(null);\n  const {\n    0: shippingAddressList,\n    1: setShippingAddressList\n  } = useState([]);\n  const {\n    0: lonLat,\n    1: setLonLat\n  } = useState(null);\n  const {\n    0: userInfo,\n    1: setUserInfo\n  } = useState(null);\n  const {\n    0: dataFlag,\n    1: setDataFlag\n  } = useState(false);\n  const {\n    0: shippingAddressId,\n    1: setShippingAddressId\n  } = useState(null);\n  const deliveryType = \"user\";\n  useEffect(async () => {\n    if (!dataFlag) {\n      let basket = await dispatch(getUserBasket(deliveryType));\n      setBasketData(basket);\n      setSubTotal(basket.sub_total);\n      setTotal(basket.total);\n      setDeliveryFee(basket.delivery_fee);\n\n      if (basket.shippingAddress) {\n        let address = basket.shippingAddress.addressLine1 + \" \" + basket.shippingAddress.addressLine2 + \" \" + basket.shippingAddress.city + \" \" + basket.shippingAddress.state + \" \" + basket.shippingAddress.zipCode;\n        setShippingAddress(address);\n        setShippingAddressId(basket.shippingAddress.id);\n        let lonLat = \"https://maps.google.com/maps?q=\" + basket.shippingAddress.lat + \", \" + basket.shippingAddress.lon + \"&z=15&output=embed\";\n        setLonLat(lonLat);\n      }\n\n      let userDetail = await dispatch(getUserInfo());\n      console.log(\"userDetail: \", userDetail.data);\n      setUserInfo(userDetail.data);\n      setShippingAddressList(userDetail.data.address);\n      setDataFlag(true);\n    }\n  }, []);\n\n  const getShipAddressById = async shipAddressId => {\n    let shippingAddress = await dispatch(getShippingAddressById(shipAddressId));\n    shippingAddress = shippingAddress.data;\n    let address = shippingAddress.addressLine1 + \" \" + shippingAddress.addressLine2 + \" \" + shippingAddress.city + \" \" + shippingAddress.state + \" \" + shippingAddress.zipCode;\n    setShippingAddress(address);\n    let lonLat = \"https://maps.google.com/maps?q=\" + shippingAddress.lat + \", \" + shippingAddress.lon + \"&z=15&output=embed\";\n    setLonLat(lonLat);\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsx(AppHead, {\n      title: \"Cheffy - Payments\"\n    }), /*#__PURE__*/_jsx(FoodHeader, {}), /*#__PURE__*/_jsx(Row, {\n      className: \"w-full bg-fixed bg-cover bg-no-repeat bg-center relative mt-20 md:mt-12\",\n      style: {\n        backgroundImage: `url(/images/payments.jpg)`,\n        height: \"40vh\",\n        backgroundSize: \"cover\",\n        filter: \"brightness(30%)\"\n      },\n      justify: \"center\",\n      align: \"middle\"\n    }), /*#__PURE__*/_jsx(Row, {\n      className: \"absolute w-full\",\n      style: {\n        height: \"40vh\",\n        transform: \"translateY(-100%)\"\n      },\n      justify: \"center\",\n      align: \"middle\",\n      children: /*#__PURE__*/_jsxs(Col, {\n        span: 32,\n        className: \"lg:px-36\",\n        children: [/*#__PURE__*/_jsx(Text, {\n          strong: true,\n          className: \"block text-center text-white text-3xl\",\n          children: \"Payments\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"flex flex-row items-center justify-center mt-2\",\n          children: /*#__PURE__*/_jsx(Text, {\n            className: \"ml-3 text-white text-center lg:px-32\",\n            children: \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.\"\n          })\n        })]\n      })\n    }), !dataFlag ? /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: \"flex pt-20 flex-col items-center justify-center\",\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: \"text-3xl\",\n          children: \"Loading\"\n        }), /*#__PURE__*/_jsx(VscLoading, {\n          className: \"text-4xl animate-spin\"\n        })]\n      })\n    }) : /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsxs(Row, {\n        gutter: 32,\n        className: \"pt-16 px-10 md:px-32\",\n        children: [/*#__PURE__*/_jsxs(Col, {\n          className: \"w-10/12 lg:w-5/12 lg:mx-16\",\n          children: [/*#__PURE__*/_jsx(Divider, {\n            className: \"m-2\"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"bg-white\",\n            children: /*#__PURE__*/_jsxs(Collapse, {\n              className: \"bg-white\",\n              defaultActiveKey: \"1\",\n              collapsible: \"header\",\n              bordered: false,\n              expandIconPosition: \"right\",\n              expandIcon: panelProps => {\n                if (panelProps.isActive) {\n                  return /*#__PURE__*/_jsx(Text, {\n                    children: /*#__PURE__*/_jsx(AiOutlineMinus, {\n                      className: \"text-xl\",\n                      fontWeight: \"bold\"\n                    })\n                  });\n                } else {\n                  return /*#__PURE__*/_jsx(Text, {\n                    children: /*#__PURE__*/_jsx(AiOutlinePlus, {\n                      className: \"text-xl\",\n                      fontWeight: \"bold\"\n                    })\n                  });\n                }\n              },\n              children: [/*#__PURE__*/_jsx(Collapse.Panel, {\n                header: /*#__PURE__*/_jsx(CollapseTitle, {\n                  title: \"Delivery Details\",\n                  number: \"1\"\n                }),\n                children: /*#__PURE__*/_jsx(CollapseItem, {\n                  deliveryAddress: shippingAddress,\n                  deliveryAddressList: shippingAddressList,\n                  shippingAddressId: shippingAddressId,\n                  setShippingAddressId: setShippingAddressId,\n                  lonLat: lonLat,\n                  getShipAddressById: getShipAddressById\n                })\n              }, \"1\"), /*#__PURE__*/_jsx(Collapse.Panel, {\n                collapsible: \"header\",\n                header: /*#__PURE__*/_jsx(CollapseTitle, {\n                  title: \"Personal Details\",\n                  number: \"2\"\n                }),\n                children: /*#__PURE__*/_jsxs(Form, {\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    className: \"mt-1\",\n                    children: [/*#__PURE__*/_jsx(\"label\", {\n                      for: \"name\",\n                      style: {\n                        fontSize: \"16px\"\n                      },\n                      children: \"Name:\"\n                    }), /*#__PURE__*/_jsx(Input, {\n                      disabled: true,\n                      className: \"w-100 py-4 px-3 mt-1 text-lg font-normal\",\n                      value: userInfo.name,\n                      name: \"name\",\n                      bordered: false,\n                      style: {\n                        backgroundColor: \"#EDF2F7\",\n                        borderRadius: \"10px\"\n                      }\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"mt-5\",\n                    children: [/*#__PURE__*/_jsx(\"label\", {\n                      for: \"email\",\n                      style: {\n                        fontSize: \"16px\"\n                      },\n                      children: \"Email:\"\n                    }), /*#__PURE__*/_jsx(Input, {\n                      disabled: true,\n                      type: \"email\",\n                      className: \"w-100 py-4 px-3 mt-1 text-lg font-normal\",\n                      value: userInfo.email,\n                      name: \"email\",\n                      bordered: false,\n                      style: {\n                        backgroundColor: \"#EDF2F7\",\n                        borderRadius: \"10px\"\n                      }\n                    })]\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    className: \"mt-5\",\n                    children: [/*#__PURE__*/_jsx(\"label\", {\n                      for: \"phone\",\n                      style: {\n                        fontSize: \"16px\"\n                      },\n                      children: \"Phone:\"\n                    }), /*#__PURE__*/_jsx(Input, {\n                      disabled: true,\n                      type: \"text\",\n                      className: \"w-100 py-4 px-3 mt-1 text-lg font-normal\",\n                      value: userInfo.phone_no,\n                      name: \"phone\",\n                      bordered: false,\n                      style: {\n                        backgroundColor: \"#EDF2F7\",\n                        borderRadius: \"10px\"\n                      }\n                    })]\n                  })]\n                })\n              }, \"2\"), /*#__PURE__*/_jsx(Collapse.Panel, {\n                collapsible: \"header\",\n                header: /*#__PURE__*/_jsx(CollapseTitle, {\n                  title: \"Payment\",\n                  number: \"3\"\n                }),\n                children: /*#__PURE__*/_jsx(App, {})\n              }, \"3\")]\n            })\n          })]\n        }), /*#__PURE__*/_jsx(Col, {\n          className: \"w-10/11 md:w-5/12 md:ml-0 ml-2\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"pt-6\",\n            children: [/*#__PURE__*/_jsx(Text, {\n              className: \"font-light font-bold text-lg\",\n              children: \"Your order\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: \"pt-10\",\n              children: [basketData.items.map((basket, index) => {\n                return /*#__PURE__*/_jsx(_Fragment, {\n                  children: /*#__PURE__*/_jsx(Item, {\n                    basketItemId: basket.basketItemId,\n                    plateID: basket.plate.id,\n                    name: basket.plate.name,\n                    price: basket.plate.price,\n                    orderCount: basket.quantity\n                  }, index)\n                });\n              }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(\"div\", {\n                className: \"pt-4 pb-2 cart-info \",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex cart-info justify-between pt-1\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"cart-total order-last\",\n                    children: /*#__PURE__*/_jsxs(\"p\", {\n                      className: \"font-normal text-base\",\n                      children: [\"$\", subTotal.toFixed(2)]\n                    })\n                  }), /*#__PURE__*/_jsx(\"span\", {\n                    className: \"font-normal text-lg\",\n                    children: \"Subtotal\"\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"py-2 cart-info \",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex cart-info justify-between pt-1\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"cart-total order-last\",\n                    children: /*#__PURE__*/_jsxs(\"p\", {\n                      className: \"font-normal text-base\",\n                      children: [\"$\", deliveryFee.toFixed(2)]\n                    })\n                  }), /*#__PURE__*/_jsx(\"span\", {\n                    className: \"font-normal text-lg\",\n                    children: \"Delivery fee\"\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"pt-2 pb-4 cart-info \",\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"flex cart-info justify-between pt-1\",\n                  children: [/*#__PURE__*/_jsx(\"div\", {\n                    className: \"cart-total order-last\",\n                    children: /*#__PURE__*/_jsxs(\"p\", {\n                      className: \"font-bold  text-base\",\n                      children: [\"$\", total.toFixed(2)]\n                    })\n                  }), /*#__PURE__*/_jsx(\"span\", {\n                    className: \"font-bold text-lg\",\n                    children: \"Total\"\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: \"flex flex-row-reverse checkout-btn cursor-pointer\",\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  className: \"py-4 px-10 text-center bg-red-500 text-white font-semibold\",\n                  children: \"Checkout \\u2192\"\n                })\n              })]\n            })]\n          })\n        })]\n      })\n    })]\n  });\n}\n\nexport default Payments;","map":null,"metadata":{},"sourceType":"module"}