{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { ArrowLeftOutlined } from '@ant-design/icons';\nimport { Button, Form, Input, message, Row, Typography } from 'antd';\nimport { signIn } from 'next-auth/client';\nimport { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { userLogin, userLoginSocial } from '../../../../redux/actions/auth/authAction';\nimport FacebookLoginComp from '../../../auth/facebookAuth';\nimport GoogleLoginComp from '../../../auth/googleAuth';\n\nconst LoginPage2 = ({\n  onClick,\n  customer,\n  goBack\n}) => {\n  const {\n    0: password,\n    1: setType\n  } = useState('password');\n  const dispatch = useDispatch();\n  const {\n    Text\n  } = Typography;\n\n  const isPasswordVisible = () => {\n    if ('password' === password) {\n      setType(() => 'text');\n    }\n\n    if ('text' === password) {\n      setType(() => 'password');\n    }\n  };\n\n  const onFinish = async values => {\n    try {\n      const vals = {\n        login: values.email.trim(),\n        password: values.password\n      };\n      const userData = await dispatch(userLogin(vals)); // console.log('cheffyCredentials', userData);\n\n      if (userData && userData.token) {\n        let callbackUrl = '/';\n\n        if (userData.data.userResponse.user_type == 'user') {\n          callbackUrl = '/food';\n        } else if (userData.data.userResponse.user_type == 'chef') {\n          callbackUrl = '/chef';\n        } else if (userData.data.userResponse.user_type == 'admin') {\n          callbackUrl = '/kitchen';\n        } else if (userData.data.userResponse.user_type == 'driver') {\n          callbackUrl = '/driver';\n        }\n\n        const user = {\n          apiToken: userData.token,\n          id: userData.data.userResponse.id,\n          name: userData.data.userResponse.name,\n          email: userData.data.userResponse.email,\n          role: userData.data.userResponse.user_type,\n          image: userData.data.userResponse.imagePath,\n          callbackUrl: `${process.env.NEXTAUTH_URL}${callbackUrl}`\n        }; // console.log('user', user);\n\n        signIn('cheffyCredentials', user);\n      }\n    } catch (err) {\n      //console.log('err', err.toString());\n      message.error(err.message);\n    }\n  };\n\n  const googleHandler = async ({\n    profileObj\n  }) => {\n    try {\n      const {\n        email,\n        googleId: provider_user_id\n      } = profileObj;\n      const userData = {\n        email,\n        provider_user_id,\n        provider: \"google\"\n      };\n      const res = await dispatch(userLoginSocial(userData));\n      const user = {\n        apiToken: res.token,\n        id: res.data.id,\n        name: res.data.name,\n        email: res.data.email,\n        role: res.data.user_type,\n        image: res.data.imagePath,\n        callbackUrl: `${process.env.NEXTAUTH_URL}`\n      };\n      signIn('cheffyCredentials', user);\n    } catch (error) {\n      message.error(error === null || error === void 0 ? void 0 : error.message);\n    }\n  };\n\n  const facebookHandler = async ({\n    email,\n    userID: provider_user_id\n  }) => {\n    try {\n      const userData = {\n        email,\n        provider_user_id,\n        provider: \"facebook\"\n      };\n      const res = await dispatch(userLoginSocial(userData));\n      const user = {\n        apiToken: res.token,\n        id: res.data.id,\n        name: res.data.name,\n        email: res.data.email,\n        role: res.data.user_type,\n        image: res.data.imagePath,\n        callbackUrl: `${process.env.NEXTAUTH_URL}`\n      };\n      signIn('cheffyCredentials', user);\n    } catch (error) {\n      message.error(error === null || error === void 0 ? void 0 : error.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"flex flex-row justify-between align-center mb-6\",\n      children: [/*#__PURE__*/_jsxs(Text, {\n        className: \"text-4xl font-extrabold\",\n        children: [customer, \" Sign In\"]\n      }), /*#__PURE__*/_jsx(\"img\", {\n        src: \"/images/close.png\",\n        alt: \"close\",\n        className: \"h-4 w-4 cursor-pointer\",\n        onClick: onClick\n      })]\n    }), /*#__PURE__*/_jsxs(Text, {\n      className: \"my-8\",\n      children: [\"or\", /*#__PURE__*/_jsx(Text, {\n        className: \"text-red-500 ml-2\",\n        children: \"Sign Up\"\n      })]\n    }), /*#__PURE__*/_jsxs(Form, {\n      className: \"mt-10\",\n      layout: \"vertical\",\n      onFinish: onFinish,\n      children: [/*#__PURE__*/_jsx(Form.Item, {\n        name: \"email\",\n        children: /*#__PURE__*/_jsx(Input, {\n          className: \"signup-input\",\n          placeholder: \"Email\",\n          type: \"email\"\n        })\n      }), /*#__PURE__*/_jsx(Form.Item, {\n        name: \"password\",\n        rules: [{\n          required: true,\n          message: \"Please enter password\"\n        }],\n        children: /*#__PURE__*/_jsx(Input.Password, {\n          className: \"px-6 py-4 signup-input\",\n          placeholder: \"Password\"\n        })\n      }), /*#__PURE__*/_jsx(Form.Item, {\n        children: /*#__PURE__*/_jsx(Button, {\n          htmlType: \"submit\",\n          className: \"py-6 flex flex-row justify-center items-center\",\n          block: true,\n          type: \"primary\",\n          children: \"Sign In\"\n        })\n      })]\n    }), /*#__PURE__*/_jsx(Text, {\n      className: \"text-red-500\",\n      children: \"Forgot Password ?\"\n    }), /*#__PURE__*/_jsx(Text, {\n      className: \"text-center block mt-8 mb-4 font-semibold text-base md:text-xl\",\n      children: \"Or Sign In With\"\n    }), /*#__PURE__*/_jsxs(Row, {\n      className: \"flex justify-center items-center gap-2 md:gap-4\",\n      children: [/*#__PURE__*/_jsx(FacebookLoginComp, {\n        handler: facebookHandler\n      }), /*#__PURE__*/_jsx(GoogleLoginComp, {\n        handler: googleHandler\n      })]\n    }), /*#__PURE__*/_jsxs(Button, {\n      className: \"mt-4 flex flex-row justify-center mx-auto items-center\",\n      onClick: goBack,\n      children: [/*#__PURE__*/_jsx(ArrowLeftOutlined, {}), \" Back\"]\n    })]\n  });\n};\n\nexport default LoginPage2;","map":null,"metadata":{},"sourceType":"module"}