{"ast":null,"code":"import axios from 'axios';\nimport { getSession } from 'next-auth/client';\nimport config from '../config';\nconst axiosClient = axios.create({\n  baseURL: `${config.BASE_URL}/`\n});\naxiosClient.interceptors.request.use(async function (config) {\n  //const token = localStorage.getItem('token');\n  const session = await getSession();\n\n  if (session && session.apiToken) {\n    // console.log('axiosClient session', session.apiToken);\n    config.headers['x-access-token'] = session.apiToken;\n  }\n\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n});\naxiosClient.interceptors.response.use(response => {\n  // console.debug('Axios onResponseSuccess', response);\n  return response.data;\n}, error => {\n  // console.debug('Axios onResponseError', error.response);\n  if (error.response && error.response.status === 403) {\n    return Promise.reject(error.response.data);\n  }\n\n  return Promise.reject(error);\n});\nexport default axiosClient;","map":null,"metadata":{},"sourceType":"module"}