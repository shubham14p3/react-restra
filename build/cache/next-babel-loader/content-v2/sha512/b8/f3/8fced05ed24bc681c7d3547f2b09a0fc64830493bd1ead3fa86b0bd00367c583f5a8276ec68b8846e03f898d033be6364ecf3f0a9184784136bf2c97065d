{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { ArrowLeftOutlined } from '@ant-design/icons';\nimport { Button, Form, Input, message, Row, Typography } from 'antd';\nimport { signIn } from 'next-auth/client';\nimport { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { userLogin, userLoginSocial } from '../../../../redux/actions/auth/authAction';\nimport FacebookLoginComp from '../../../auth/facebookAuth';\nimport GoogleLoginComp from '../../../auth/googleAuth';\n\nvar LoginPage2 = function LoginPage2(_ref) {\n  var onClick = _ref.onClick,\n      customer = _ref.customer,\n      goBack = _ref.goBack;\n\n  var _useState = useState('password'),\n      password = _useState[0],\n      setType = _useState[1];\n\n  var dispatch = useDispatch();\n  var Text = Typography.Text;\n\n  var isPasswordVisible = function isPasswordVisible() {\n    if ('password' === password) {\n      setType(function () {\n        return 'text';\n      });\n    }\n\n    if ('text' === password) {\n      setType(function () {\n        return 'password';\n      });\n    }\n  };\n\n  var onFinish = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values) {\n      var vals, userData, callbackUrl, user;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              vals = {\n                login: values.email.trim(),\n                password: values.password\n              };\n              _context.next = 4;\n              return dispatch(userLogin(vals));\n\n            case 4:\n              userData = _context.sent;\n\n              // console.log('cheffyCredentials', userData);\n              if (userData && userData.token) {\n                callbackUrl = '/';\n\n                if (userData.data.userResponse.user_type == 'user') {\n                  callbackUrl = '/food';\n                } else if (userData.data.userResponse.user_type == 'chef') {\n                  callbackUrl = '/chef';\n                } else if (userData.data.userResponse.user_type == 'admin') {\n                  callbackUrl = '/kitchen';\n                } else if (userData.data.userResponse.user_type == 'driver') {\n                  callbackUrl = '/driver';\n                }\n\n                user = {\n                  apiToken: userData.token,\n                  id: userData.data.userResponse.id,\n                  name: userData.data.userResponse.name,\n                  email: userData.data.userResponse.email,\n                  role: userData.data.userResponse.user_type,\n                  image: userData.data.userResponse.imagePath,\n                  callbackUrl: \"\".concat(process.env.NEXTAUTH_URL).concat(callbackUrl)\n                }; // console.log('user', user);\n\n                signIn('cheffyCredentials', user);\n              }\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              //console.log('err', err.toString());\n              message.error(_context.t0.message);\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n\n    return function onFinish(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var googleHandler = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref3) {\n      var profileObj, email, provider_user_id, userData, res, user;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              profileObj = _ref3.profileObj;\n              _context2.prev = 1;\n              email = profileObj.email, provider_user_id = profileObj.googleId;\n              userData = {\n                email: email,\n                provider_user_id: provider_user_id,\n                provider: \"google\"\n              };\n              _context2.next = 6;\n              return dispatch(userLoginSocial(userData));\n\n            case 6:\n              res = _context2.sent;\n              user = {\n                apiToken: res.token,\n                id: res.data.id,\n                name: res.data.name,\n                email: res.data.email,\n                role: res.data.user_type,\n                image: res.data.imagePath,\n                callbackUrl: \"\".concat(process.env.NEXTAUTH_URL)\n              };\n              signIn('cheffyCredentials', user);\n              _context2.next = 14;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t0 = _context2[\"catch\"](1);\n              message.error(_context2.t0 === null || _context2.t0 === void 0 ? void 0 : _context2.t0.message);\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 11]]);\n    }));\n\n    return function googleHandler(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var facebookHandler = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref5) {\n      var email, provider_user_id, userData, res, user;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              email = _ref5.email, provider_user_id = _ref5.userID;\n              _context3.prev = 1;\n              userData = {\n                email: email,\n                provider_user_id: provider_user_id,\n                provider: \"facebook\"\n              };\n              _context3.next = 5;\n              return dispatch(userLoginSocial(userData));\n\n            case 5:\n              res = _context3.sent;\n              user = {\n                apiToken: res.token,\n                id: res.data.id,\n                name: res.data.name,\n                email: res.data.email,\n                role: res.data.user_type,\n                image: res.data.imagePath,\n                callbackUrl: \"\".concat(process.env.NEXTAUTH_URL)\n              };\n              signIn('cheffyCredentials', user);\n              _context3.next = 13;\n              break;\n\n            case 10:\n              _context3.prev = 10;\n              _context3.t0 = _context3[\"catch\"](1);\n              message.error(_context3.t0 === null || _context3.t0 === void 0 ? void 0 : _context3.t0.message);\n\n            case 13:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[1, 10]]);\n    }));\n\n    return function facebookHandler(_x3) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"flex flex-row justify-between align-center mb-6\",\n      children: [/*#__PURE__*/_jsxs(Text, {\n        className: \"text-4xl font-extrabold\",\n        children: [customer, \" Sign In\"]\n      }), /*#__PURE__*/_jsx(\"img\", {\n        src: \"/images/close.png\",\n        alt: \"close\",\n        className: \"h-4 w-4 cursor-pointer\",\n        onClick: onClick\n      })]\n    }), /*#__PURE__*/_jsxs(Text, {\n      className: \"my-8\",\n      children: [\"or\", /*#__PURE__*/_jsx(Text, {\n        className: \"text-red-500 ml-2\",\n        children: \"Sign Up\"\n      })]\n    }), /*#__PURE__*/_jsxs(Form, {\n      className: \"mt-10\",\n      layout: \"vertical\",\n      onFinish: onFinish,\n      children: [/*#__PURE__*/_jsx(Form.Item, {\n        name: \"email\",\n        children: /*#__PURE__*/_jsx(Input, {\n          className: \"signup-input\",\n          placeholder: \"Email\",\n          type: \"email\"\n        })\n      }), /*#__PURE__*/_jsx(Form.Item, {\n        name: \"password\",\n        rules: [{\n          required: true,\n          message: \"Please enter password\"\n        }],\n        children: /*#__PURE__*/_jsx(Input.Password, {\n          className: \"px-6 py-4 signup-input\",\n          placeholder: \"Password\"\n        })\n      }), /*#__PURE__*/_jsx(Form.Item, {\n        children: /*#__PURE__*/_jsx(Button, {\n          htmlType: \"submit\",\n          className: \"py-6 flex flex-row justify-center items-center\",\n          block: true,\n          type: \"primary\",\n          children: \"Sign In\"\n        })\n      })]\n    }), /*#__PURE__*/_jsx(Text, {\n      className: \"text-red-500\",\n      children: \"Forgot Password ?\"\n    }), /*#__PURE__*/_jsx(Text, {\n      className: \"text-center block mt-8 mb-4 font-semibold text-base md:text-xl\",\n      children: \"Or Sign In With\"\n    }), /*#__PURE__*/_jsxs(Row, {\n      className: \"flex justify-center items-center gap-2 md:gap-4\",\n      children: [/*#__PURE__*/_jsx(FacebookLoginComp, {\n        handler: facebookHandler\n      }), /*#__PURE__*/_jsx(GoogleLoginComp, {\n        handler: googleHandler\n      })]\n    }), /*#__PURE__*/_jsxs(Button, {\n      className: \"mt-4 flex flex-row justify-center mx-auto items-center\",\n      onClick: goBack,\n      children: [/*#__PURE__*/_jsx(ArrowLeftOutlined, {}), \" Back\"]\n    })]\n  });\n};\n\nexport default LoginPage2;","map":null,"metadata":{},"sourceType":"module"}